# 이상한 나라의 객체
### 객체지향과 인지능력
객체지향이 직관적이고 이해하기 쉬운 패러다임이라고 말하는 이유는 인간의 기본적인 인지능력에 기반을 두고 있기 때문이다.

객체라 부를 수 있는 존재로 사람, 자동차, 가로수, 컴퓨터 등 물리적인 것도 있고, 물리적 한계를 넘어 개념적으로 경계 지을 수 있는 추상적인 사물까지도 객체로 인식할 수 있다. 예를 들어 주문, 계좌이체 같은 물리적인 실체는 존재하지 않아도 인간이 쉽게 구분하고, 하나의 단위로 인지할 수 있는 개념적인 객체의 일종이다.

객체지향이 현실세계와 유사하다 하여 객체지향 패러다임의 목적이 현실 세계를 모방하는 것이 아니라 현실 세계를 기반으로 새로운 세계를 창조하는 것이다.

[객체의 정의]
* 객체는 식별 가능한 개체 또는 사물이다.
* 객체는 만질 수 있는 구체적인 사물일 수도 있고, 시간처럼 추상적인 개념일 수도 있다.
* 객체는 구별 가능한 식별자, 특징적인 행동, 변경 가능한 상태를 가진다.
* 소프트웨어 안에서 객체는 저장된 상태와 실행 가능한 코드를 통해 구현된다.

#### __상태__
왜 상태가 필요한가? 실세계에서 대부분의 일들은 어떤 행동의 결과는 과거에 어떤 행동들이 일어났었느냐에 의존한다. 일반적으로 과거에 발생한 이력을 통해 현재 발생한 행동의 결과를 판단하는 방식은 번거로우며 이해하기 어렵다. '상태'라는 개념을 이용하면 과거의 모든 이력을 설명하지 않고도 행동의 결과를 쉽게 예측할 수 있고 설명할 수 있다. (예. 비행기 탑승 가능 여부 - 항공권의 발권 상태, 자판기 - 현재까지 투입된 금액의 상태, 텔레비전 - 전원이 들어온 상태 등등)

세상에 존재하는 모든 것들이 객체인 것은 아닌데 분명하게 인식할 수 있음에도 객체의 영역에 포함시킬 수 없는 것들도 존재한다. 숫자, 문자열, 양, 속도, 시간, 날짜, 참/거짓 등 단순한 값들은 객체가 아니라 객체의 상태를 표현하기 위해 사용된다. 또 때로는 단순한 값이 아닌 객체를 사용하여 다른 객체의 상태를 표현하기도 한다. 이때는 객체와 객체가 연결되었는지 여부로 표현할 수 있다.

결론적으로 객체의 상태는 단순한 값과 객체의 조합으로 표현할 수 있고, 객체의 상태를 구성하는 모든 특징을 __'객체의 프로퍼티'__ 라고 한다. 일반적으로 프로퍼티는 고정되어 있기 때문에 정적이고, 프로퍼티의 값은 시간의 흐름에 따라 변하기 때문에 동적이다.

객체와 객체 사이의 의미있는 연결을 __'링크'__ 라고 한다. 객체과 객체 사이에는 링크가 존재햐아만 요청을 주고받을 수 있다. (즉 링크를 통해서만 메세지 교환 가능)

객체를 구성하는 단순한 값은 __'속성'__ 이라고 한다. 객체의 프로퍼티는 단순한 값인 속성과 다른 객체를 가리키는 링크 두 가지 종류의 조합으로 표현할 수 있다.

객체는 자율적인 존재다. 객체지향 세계에서 객체는 다른 객체의 상태에 직접적으로 접근할 수도, 상태를 변경할 수도 없다(private), 따라서 객체의 상태를 변경하거나 조회할 수 있는 방법이 필요한데 이때 __'행동'__ 으로 하여금 간접적으로 객체의 상태를 변경하는 것을 가능하게 했다(public) 객체는 스스로의 행동에 의해서만 상태가 변경되는 것을 보장함으로써 객체의 자율성을 유지한다. 

#### __행동__
객체의 상태를 변경하는 것은 객체의 행동뿐이다. 객체의 행동에 의해 객체의 상태가 변경된다는 것은 행동이 부수 효과를 초래한다는 것을 의미한다.

객체의 행동은 객체의 상태를 변경시키지만 행동의 결과는 객체의 상태에 의존적이다.(상태에 따라 어떤 행동을 해야하는지 결정)

객체는 자신에게 주어진 책임을 완수하기 위해 다른 객체를 이용하고, 다른 객체에게 서비스를 제공하기도 한다. 객체가 다른 객체와 협력하는 유일한 방법은 다른 객체에게 요청(메시지)를 보내는 것이다. 객체가 어떤 행동을 하도록 만드는 방법은 외부로부터 수신한 메시지를 통해서다. 객체는 수신된 메시지에 따라 적절히 행동하면서 협력에 참여하고 그 결과로 자신의 상태를 변경한다.

객체지향속 객체는 자신의 상태를 스스로 관리하는 자율적인 존재다. 한 객체는 다른 객체에게 요청(메시지)를 보내고, 메시지를 수신한 객체의 상태 변경에 대해서는 알지 못 한다. 이것이 캡슐화를 의미하는데 객체는 상태를 캡슐 안에 감춰둔 채 외부로 노출하지 않는다. 객체가 외부로 노출하는 것은 행동뿐이며, 외부에서 객체에 접근할 수 있는 유일한 방법도 행동뿐이다. 캡슐화는 객체의 자율성을 높이고 협력을 단순하고 유연하게 만든다. 이것이 캡슐화를 해야하는 이유이다.

#### __식별자__
객체란 인간의 인지 능력을 이용해 식별 가능한 경계를 가진 모든 사물을 의미한다. 객체가 식별 가능하다는 것은 객체는 서로 구별할 수 있는 특정한 프로퍼티가 객체안에 존재한다는 것을 의미한다. 이 프로퍼티를 '식별자'라 한다.

단순한 값은 숫자, 문자열, 날짜, 시간등과 같이 변하지 않는 양을 모델링한다. 값의 상태는 변하지 않기 때문에 불변 상태를 가진다. 값이 같은지 여부는 상태가 같은지를 이용해 판단한다. 이처럼 상태를 이용해 두 값이 같은지 판단할 수 있는 성질을 __'동등성'__ 이라 한다. 값은 오로지 상태만을 이용해 동등성을 판단하기 때문에 별도의 식별자가 필요하지 않다.

객체는 시간에 따라 변경되는 상태를 포함하고, 행동을 통해 상태를 변경한다. 따라서 객체는 가변 상태를 가진다. 타입이 같은 두 객체의 상태가 완전히 똑같더라고 두 객체는 독립적인 별개의 객체로 다뤄야한다. 구 객체의 상태가 다르더라도 식별자가 같다면 두 객체를 같은 객체로 판단할 수 있다. 이처럼 식별자를 이용해 객체가 같은지 판단할 수 있는 성질을 __'동일성'__ 이라 한다. 상태를 기반으로 동일성을 판단할 수 없는 이유는 시간의 흐름에 따라 객체의 상태가 변하기 때문이다. 

[요약]
* 객체는 상태를 가지며, 상태는 변경 가능하다.
* 객체의 상태를 변경시키는 것은 객체의 행동이다.
* 객체는 어떤 상태에 있더라도 유일하게 식별 가능하다.

### 기계로서의 객체
객체의 상태를 조회하는 작업을 '쿼리', 객체의 상태를 변경하는 작업을 '명령'이라고 한다. 객체가 외부에 제공하는 행동의 대부분은 쿼리와 명령으로 구성된다. 

객체는 기계로 비유할 수 있는데 기계는 분해하지 않는한 내부를 직접 볼 수 없고(캡슐화), 외부에 부착된 버튼을 통해 기계와 상호작용을 한다. 버튼을 눌러 기계의 상태를 변경할 수 있지만 상태가 변경되는 순간을 직접 눈으로 볼 수는 없다. 이처럼 사용자가 기계의 버튼을 눌러 상태를 변경하거나 상태 조회를 요청하는 것은 객체의 행동을 유발하기 위해 메시지를 전송하는 것과 유사하다. 객체를 기계로서 바라보는 관점은 상태, 행동, 식별자에 대한 시각적인 이미지를 제공하고 캡슐화롸 메시지를 통한 협력관계를 효과적으로 설명한다.

### 행동이 상태를 결정한다.
초보자들이 흔히 하는 실수가 상태를 중심으로 객체를 바라보는 것이다. 초보자들은 객체에 필요한 상태가 무엇인지를 결정한 뒤 그 상태에 필요한 행동을 결정한다. 이러한 행동은 설계에 나쁜 영향을 끼치게 된다.
1) 상태를 먼저 결정할 경우 캡슐화가 저해된다. 상태에 초점을 맞추는 경우 깔끔하게 캡슐화되지 못하고 공용 인터페이스에 그대로 노출될 확률이 높아진다.
2) 객체를 협력자가 아닌 고립된 섬으로 만든다. 상태를 먼저 고려하게 되면 협력에 적합하지 못한 객체가 된다.
3) 객체의 재사용성이 저해된다. 

따라서 협력에 참여하는 객체를 만들기 위해서는 상태가 아닌 행동에 초점을 맞추어 설계하는 것이다. 객체지향 설계는 애플리케이션에 필요한 협력을 생각하고 협력에 참여하는 데 필요한 행동을 생각한 후 행동을 수행할 객체를 선택하는 방식으로 수행된다. 협력 안에서 객체의 행동은 객체가 협력에 참여하면서 완수해야하는 책임을 의미한다. 따라서 어떤 책임이 필요한가를 결정하는 과정이 전체 설계를 주도해야한다. (책임-주도 설계)

### 은유와 객체
흔히 객체지향을 설명할 때 현실 세계의 모방이라고 보는 관점이 많다. 하지만 객체지향 세계는 현실 세계의 단순한 모방이 아니다. 현실 속의 객체와 소프트웨어 객체 사이의 가장 큰 차이점은 현실 속에서는 수동적인 존재가 소프트웨어 객체로 구현될 때는 능동적으로 변한다는 것이다. 이러한 특징을 객체의 의인화라 한다.

현실 세계와 객체지향 세계 사이의 관계를 정확히 표현할만한 단어는 '은유' 이다. 은유는 실제로는 적용되지 않는 한 가지 개념을 이용해 다른 개념을 서술하는 대화의 한 형태다. 현실 속의 객체의 의미 일부가 소프트웨어 객체로 전달되기 때문에 프로그램 내의 객체는 현실 속의 객체에 대한 은유다. 소프트웨어 객체에 대한 현실 객체의 은유를 효과적으로 사용할 경우 표현적 차이를 줄일 수 있고, 이해하기 쉽고, 유지보수가 용이한 소프트웨어를 만들 수 있다.